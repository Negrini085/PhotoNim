name: Coveralls

on:
  # Runs on pushes targeting the default branch
  push:
    paths-ignore:
      - 'LICENSE'
      - '*.md'
    branches: 
      - master

  pull_request:
    paths-ignore:
      - 'LICENSE'
      - '*.md'

jobs:
  test:
    runs-on: ubuntu-latest
    steps:

    - uses: actions/checkout@v3

    - name: Use Node.js 16.x
      uses: actions/setup-node@v3
      with:
        node-version: 16.x

    - name: make test-coverage
      run: make test-coverage

    - name: Report Coveralls
      uses: coverallsapp/github-action@v2